<%- include ('../partials/header') %>

<div class="container my-5">
  <header>
    <h1>Reservations</h1>
  </header>

  <hr>

  
    <div class="content">
      <% for (let reservation of reservations) { %>
        <% if (authorized && (typeof reservation.user === 'undefined' || reservation.user.email === email)) { %>
          <div class="card my-5">
            <div class="card-header">
              <h5 class="card-title">
                for: <%= reservation.restaurant %>
              </h5>
              <% if (typeof reservation.user !== 'undefined') { %>
                <small>~ <%= reservation.user.fullname %></small>
              <% } %>
            </div>

            <div class="card-body">
              <p class="card-text">
                Your reservation is for <strong><%= (reservation.dateAndTime.toLocaleString("en-CA")) %></strong> for <%= reservation.quantityOfGuests %>. Please be on time to avoid losing your seat.
              </p>
            </div>

            <div class="card-footer text-muted">
              <a href="/reservations/<%= reservation.id %>/edit"><i class="fa fa-edit">&nbsp;</i>Change your reservation</a>
              <br>
              <form class="form-inline" action="/reservations/delete" method="post" onsubmit="return confirm('Are you sure you want to cancel your reservation?');">
                <input type="hidden" value="<%= reservation.id %>" name="id">
                <button class="delete" type="submit">
                  <i class="fa fa-trash">&nbsp;</i>
                  Cancel your reservation
                </button>
              </form>
            </div>
          </div>
        <% } %>
      <% } %>
    </div>
  
</div>

<%- include ('../partials/footer') %>